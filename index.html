<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hệ Thống Nộp Bài Online</title>
    
    <!-- 1. Tailwind CSS (Giao diện) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. Babel (Để trình duyệt hiểu code React JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 3. Import Map (Khai báo thư viện React, Firebase, Lucide) -->
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "firebase/app": "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js",
        "firebase/auth": "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js",
        "firebase/firestore": "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js",
        "lucide-react": "https://esm.sh/lucide-react@0.292.0"
      }
    }
    </script>
    
    <style>
        /* Animation nhẹ cho ứng dụng mượt mà hơn */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-in { animation: fadeIn 0.4s ease-out forwards; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">
    <div id="root"></div>

    <!-- 4. Mã Nguồn Ứng Dụng -->
    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useMemo } from 'react';
        import { createRoot } from 'react-dom/client';
        import { initializeApp } from 'firebase/app';
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from 'firebase/auth';
        import { getFirestore, collection, doc, setDoc, addDoc, onSnapshot, query, orderBy, serverTimestamp } from 'firebase/firestore';
        import { 
            BookOpen, User, Link as LinkIcon, Send, FileSpreadsheet, LogOut, 
            CheckCircle, Search, Lock, History, X, AlertTriangle, Wifi, WifiOff 
        } from 'lucide-react';

        // --- CẤU HÌNH FIREBASE CỦA BẠN (ĐIỀN VÀO ĐÂY NẾU MUỐN ONLINE) ---
        // Nếu để trống, App sẽ chạy chế độ Offline (LocalStorage)
        const YOUR_FIREBASE_CONFIG = null; 
        // Ví dụ: const YOUR_FIREBASE_CONFIG = { apiKey: "...", authDomain: "...", ... };
        
        const YOUR_APP_ID = "lop-hoc-01"; // ID để phân biệt nếu dùng chung database

        // --- KHỞI TẠO HỆ THỐNG ---
        let db = null;
        let auth = null;
        let isFirebaseAvailable = false;
        let appId = YOUR_APP_ID;

        try {
            if (YOUR_FIREBASE_CONFIG) {
                const app = initializeApp(YOUR_FIREBASE_CONFIG);
                auth = getAuth(app);
                db = getFirestore(app);
                isFirebaseAvailable = true;
                console.log("Đã kết nối Firebase Online");
            } else {
                throw new Error("Chưa có cấu hình Firebase");
            }
        } catch (error) {
            console.warn("Chạy chế độ Offline (LocalStorage):", error.message);
            isFirebaseAvailable = false;
        }

        // --- HOOK QUẢN LÝ DỮ LIỆU ---
        function useDataManagement(user) {
            const [students, setStudents] = useState([]);
            const [tasks, setTasks] = useState([]);
            const [submissions, setSubmissions] = useState([]);
            const [loading, setLoading] = useState(true);
            const [connectionStatus, setConnectionStatus] = useState(isFirebaseAvailable ? 'online' : 'offline');

            // Load Config
            useEffect(() => {
                if (isFirebaseAvailable && user) {
                    // Online: Lấy từ Firestore
                    const configRef = doc(db, 'artifacts', appId, 'public', 'data', 'settings', 'config');
                    const unsub = onSnapshot(configRef, (docSnap) => {
                        if (docSnap.exists()) {
                            const data = docSnap.data();
                            setStudents(Array.isArray(data.students) ? data.students : []);
                            setTasks(Array.isArray(data.tasks) ? data.tasks : []);
                        } else {
                            setStudents([]); setTasks([]);
                        }
                        setLoading(false);
                    }, (err) => {
                        console.error("Lỗi Online, chuyển Offline:", err);
                        setConnectionStatus('offline');
                        setLoading(false);
                    });
                    return () => unsub();
                } else {
                    // Offline: Lấy từ LocalStorage
                    try {
                        const savedConfig = localStorage.getItem('app_config');
                        if (savedConfig) {
                            const parsed = JSON.parse(savedConfig);
                            setStudents(Array.isArray(parsed.students) ? parsed.students : []);
                            setTasks(Array.isArray(parsed.tasks) ? parsed.tasks : []);
                        }
                    } catch (e) { console.error(e); }
                    setLoading(false);
                }
            }, [user, connectionStatus]);

            // Load Submissions
            useEffect(() => {
                if (isFirebaseAvailable && user) {
                    // Online
                    const subQuery = query(collection(db, 'artifacts', appId, 'public', 'data', 'submissions'), orderBy('timestamp', 'desc'));
                    const unsub = onSnapshot(subQuery, (snapshot) => {
                        const subs = snapshot.docs.map(d => ({ id: d.id, ...d.data() }));
                        setSubmissions(subs);
                    }, console.error);
                    return () => unsub();
                } else {
                    // Offline
                    try {
                        const savedSubs = localStorage.getItem('app_submissions');
                        if (savedSubs) setSubmissions(JSON.parse(savedSubs));
                    } catch (e) { console.error(e); }
                }
            }, [user, connectionStatus]);

            // Actions
            const addSubmission = async (data) => {
                const newSub = {
                    ...data,
                    submittedAt: new Date().toISOString(),
                    timestamp: isFirebaseAvailable ? serverTimestamp() : { seconds: Date.now() / 1000 }
                };

                if (isFirebaseAvailable && user) {
                    await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'submissions'), newSub);
                } else {
                    const currentSubs = JSON.parse(localStorage.getItem('app_submissions') || '[]');
                    const subWithId = { ...newSub, id: 'local_' + Date.now() };
                    const updatedSubs = [subWithId, ...currentSubs];
                    localStorage.setItem('app_submissions', JSON.stringify(updatedSubs));
                    setSubmissions(updatedSubs);
                }
            };

            const updateConfig = async (newStudents, newTasks) => {
                const cleanStudents = Array.isArray(newStudents) ? newStudents.map(String) : [];
                const cleanTasks = Array.isArray(newTasks) ? newTasks.map(String) : [];

                if (isFirebaseAvailable && user) {
                    await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'settings', 'config'), {
                        students: cleanStudents,
                        tasks: cleanTasks
                    });
                } else {
                    localStorage.setItem('app_config', JSON.stringify({ students: cleanStudents, tasks: cleanTasks }));
                    setStudents(cleanStudents);
                    setTasks(cleanTasks);
                }
            };

            return { students, tasks, submissions, loading, addSubmission, updateConfig, connectionStatus };
        }

        // --- APP COMPONENT ---
        function App() {
            const [user, setUser] = useState(null);
            const [isAdmin, setIsAdmin] = useState(false);
            const [activeTab, setActiveTab] = useState('student');
            
            useEffect(() => {
                if (!isFirebaseAvailable) {
                    setUser({ uid: 'offline-user', isAnonymous: true });
                    return;
                }
                signInAnonymously(auth).catch((e) => setUser({ uid: 'offline-user', isAnonymous: true }));
                return onAuthStateChanged(auth, (u) => u && setUser(u));
            }, []);

            const { students, tasks, submissions, loading, addSubmission, updateConfig, connectionStatus } = useDataManagement(user);

            const handleAdminLogin = (password) => {
                // MẬT KHẨU ADMIN
                if (password === 'admin123') {
                    setIsAdmin(true);
                    setActiveTab('admin');
                    return true;
                }
                return false;
            };

            if (loading) return (
                <div className="min-h-screen flex flex-col items-center justify-center bg-gray-50">
                    <div className="w-10 h-10 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mb-4"></div>
                    <p>Đang tải dữ liệu...</p>
                </div>
            );

            return (
                <div className="min-h-screen bg-gray-50 text-gray-800 font-sans">
                    {/* Header */}
                    <header className="bg-gradient-to-r from-blue-700 to-blue-800 text-white p-4 shadow-lg sticky top-0 z-50">
                        <div className="max-w-4xl mx-auto flex justify-between items-center">
                            <div className="flex items-center space-x-2 cursor-pointer select-none" onClick={() => setActiveTab('student')}>
                                <BookOpen className="h-6 w-6" />
                                <div className="flex flex-col">
                                    <h1 className="text-lg font-bold leading-tight">Nộp Bài Online</h1>
                                    {connectionStatus === 'offline' && (
                                        <span className="text-[10px] bg-yellow-500 text-white px-1 rounded w-fit flex items-center">
                                            <WifiOff className="h-3 w-3 mr-1" /> Offline Mode
                                        </span>
                                    )}
                                </div>
                            </div>
                            
                            <div className="flex space-x-2">
                                {!isAdmin ? (
                                    <button onClick={() => setActiveTab('login')} className="px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg text-sm flex items-center transition-all backdrop-blur-sm">
                                        <Lock className="h-4 w-4 mr-1" /> Admin
                                    </button>
                                ) : (
                                    <button onClick={() => { setIsAdmin(false); setActiveTab('student'); }} className="px-3 py-1.5 bg-red-500 hover:bg-red-600 rounded-lg text-sm flex items-center transition-all shadow-sm">
                                        <LogOut className="h-4 w-4 mr-1" /> Thoát
                                    </button>
                                )}
                            </div>
                        </div>
                    </header>

                    {/* Main Content */}
                    <main className="max-w-4xl mx-auto p-4 mt-2">
                        {connectionStatus === 'offline' && isAdmin && (
                            <div className="mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-yellow-800 text-sm flex items-start">
                                <AlertTriangle className="h-5 w-5 mr-2 flex-shrink-0" />
                                <span><strong>Chú ý:</strong> Dữ liệu đang lưu trên trình duyệt này. Hãy cấu hình Firebase để lưu online.</span>
                            </div>
                        )}

                        {!isAdmin && activeTab !== 'login' && (
                            <div className="grid grid-cols-2 gap-2 mb-6 p-1 bg-white rounded-xl shadow-sm border border-gray-200">
                                <button onClick={() => setActiveTab('student')} className={`py-2.5 px-4 rounded-lg text-sm font-medium transition-all duration-200 flex justify-center items-center ${activeTab === 'student' ? 'bg-blue-600 text-white shadow-md' : 'text-gray-600 hover:bg-gray-50'}`}>
                                    <Send className="h-4 w-4 mr-2" /> Nộp Bài
                                </button>
                                <button onClick={() => setActiveTab('report')} className={`py-2.5 px-4 rounded-lg text-sm font-medium transition-all duration-200 flex justify-center items-center ${activeTab === 'report' ? 'bg-blue-600 text-white shadow-md' : 'text-gray-600 hover:bg-gray-50'}`}>
                                    <History className="h-4 w-4 mr-2" /> Tra Cứu
                                </button>
                            </div>
                        )}

                        <div className="bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden min-h-[450px]">
                            {activeTab === 'student' && <StudentSubmissionView students={students} tasks={tasks} onSubmit={addSubmission} onSuccess={() => setActiveTab('report')} />}
                            {activeTab === 'report' && <StudentReportView students={students} submissions={submissions} />}
                            {activeTab === 'login' && <AdminLoginView onLogin={handleAdminLogin} onCancel={() => setActiveTab('student')} />}
                            {activeTab === 'admin' && isAdmin && <AdminDashboard students={students} tasks={tasks} submissions={submissions} onUpdateConfig={updateConfig} />}
                        </div>
                    </main>
                </div>
            );
        }

        // --- SUB COMPONENTS ---

        function StudentSubmissionView({ students, tasks, onSubmit, onSuccess }) {
            const [selectedStudent, setSelectedStudent] = useState('');
            const [selectedTask, setSelectedTask] = useState('');
            const [link, setLink] = useState('');
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [message, setMessage] = useState(null);

            const handleSubmit = async (e) => {
                e.preventDefault();
                if (!selectedStudent || !selectedTask || !link) {
                    setMessage({ type: 'error', text: 'Vui lòng điền đủ: Tên, Nhiệm vụ và Link!' });
                    return;
                }
                setIsSubmitting(true);
                try {
                    await onSubmit({ studentName: selectedStudent, taskName: selectedTask, link: link });
                    setMessage({ type: 'success', text: 'Nộp bài thành công!' });
                    setLink('');
                    setTimeout(onSuccess, 1500);
                } catch (error) {
                    setMessage({ type: 'error', text: 'Lỗi khi nộp bài.' });
                } finally { setIsSubmitting(false); }
            };

            if (students.length === 0 || tasks.length === 0) return (
                <div className="p-10 text-center flex flex-col items-center justify-center h-full">
                    <BookOpen className="h-8 w-8 text-gray-400 mb-4" />
                    <h3 className="text-lg font-bold text-gray-700">Chưa có dữ liệu</h3>
                    <p className="text-gray-500 text-sm">Giáo viên cần đăng nhập Admin để tạo lớp.</p>
                </div>
            );

            return (
                <div className="p-6 md:p-8 animate-in">
                    <h2 className="text-2xl font-bold text-gray-800 mb-6 flex items-center">Nộp Bài Mới</h2>
                    {message && (
                        <div className={`p-4 mb-6 rounded-lg flex items-center ${message.type === 'success' ? 'bg-green-50 text-green-700 border border-green-200' : 'bg-red-50 text-red-700 border border-red-200'}`}>
                            {message.type === 'success' ? <CheckCircle className="h-5 w-5 mr-2" /> : <X className="h-5 w-5 mr-2" />}
                            <span>{message.text}</span>
                        </div>
                    )}
                    <form onSubmit={handleSubmit} className="space-y-6">
                        <div className="grid md:grid-cols-2 gap-6">
                            <div>
                                <label className="block text-sm font-semibold text-gray-700 mb-2">Họ và tên</label>
                                <select value={selectedStudent} onChange={(e) => setSelectedStudent(e.target.value)} className="block w-full px-4 py-3 border border-gray-200 bg-gray-50 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none">
                                    <option value="">-- Chọn tên của bạn --</option>
                                    {students.map((s, idx) => <option key={idx} value={s}>{s}</option>)}
                                </select>
                            </div>
                            <div>
                                <label className="block text-sm font-semibold text-gray-700 mb-2">Bài tập</label>
                                <select value={selectedTask} onChange={(e) => setSelectedTask(e.target.value)} className="block w-full px-4 py-3 border border-gray-200 bg-gray-50 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none">
                                    <option value="">-- Chọn bài tập --</option>
                                    {tasks.map((t, idx) => <option key={idx} value={t}>{t}</option>)}
                                </select>
                            </div>
                        </div>
                        <div>
                            <label className="block text-sm font-semibold text-gray-700 mb-2">Link sản phẩm</label>
                            <input type="url" value={link} onChange={(e) => setLink(e.target.value)} placeholder="https://..." className="block w-full px-4 py-3 border border-gray-200 bg-gray-50 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none" />
                        </div>
                        <button type="submit" disabled={isSubmitting} className="w-full py-3.5 px-4 rounded-xl text-white font-bold bg-blue-600 hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all">
                            {isSubmitting ? 'Đang gửi...' : 'Gửi Bài Ngay'}
                        </button>
                    </form>
                </div>
            );
        }

        function StudentReportView({ students, submissions }) {
            const [filterName, setFilterName] = useState('');
            const mySubmissions = useMemo(() => submissions.filter(sub => sub.studentName === filterName), [filterName, submissions]);

            return (
                <div className="p-6 h-full flex flex-col animate-in">
                    <div className="mb-6">
                        <h2 className="text-xl font-bold text-gray-800 mb-2">Tra Cứu Kết Quả</h2>
                        <select value={filterName} onChange={(e) => setFilterName(e.target.value)} className="block w-full px-4 py-3 border border-blue-200 bg-blue-50 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none">
                            <option value="">-- Chọn tên của bạn để xem --</option>
                            {students.map((s, idx) => <option key={idx} value={s}>{s}</option>)}
                        </select>
                    </div>
                    {filterName ? (
                        <div className="flex-1 overflow-auto">
                            <div className="flex justify-between mb-3 px-1"><span className="text-sm">Học viên: <b>{filterName}</b></span><span className="text-xs font-bold bg-green-100 text-green-800 px-2 py-1 rounded">Tổng: {mySubmissions.length}</span></div>
                            <div className="border border-gray-100 rounded-xl overflow-hidden shadow-sm">
                                <table className="min-w-full divide-y divide-gray-100">
                                    <thead className="bg-gray-50"><tr><th className="px-4 py-3 text-left text-xs font-bold text-gray-500 uppercase">Bài</th><th className="px-4 py-3 text-left text-xs font-bold text-gray-500 uppercase">Ngày</th><th className="px-4 py-3 text-left text-xs font-bold text-gray-500 uppercase">Link</th></tr></thead>
                                    <tbody className="bg-white divide-y divide-gray-100">
                                        {mySubmissions.length > 0 ? mySubmissions.map((sub, i) => (
                                            <tr key={i} className="hover:bg-blue-50"><td className="px-4 py-3 text-sm font-medium">{sub.taskName}</td><td className="px-4 py-3 text-xs text-gray-500">{sub.submittedAt ? new Date(sub.submittedAt).toLocaleString('vi-VN') : '-'}</td><td className="px-4 py-3 text-sm"><a href={sub.link} target="_blank" className="text-blue-600 hover:underline flex items-center">Mở <LinkIcon className="h-3 w-3 ml-1"/></a></td></tr>
                                        )) : <tr><td colSpan="3" className="px-4 py-10 text-center text-sm text-gray-400">Chưa có bài nộp.</td></tr>}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    ) : (
                        <div className="flex-1 flex flex-col items-center justify-center opacity-50"><Search className="h-12 w-12 text-gray-300 mb-2"/><p className="text-gray-400 text-sm">Chọn tên để xem dữ liệu</p></div>
                    )}
                </div>
            );
        }

        function AdminLoginView({ onLogin, onCancel }) {
            const [pass, setPass] = useState('');
            const [error, setError] = useState('');
            return (
                <div className="p-8 flex flex-col items-center justify-center h-full animate-in">
                    <div className="w-full max-w-sm bg-white p-6 rounded-2xl">
                        <div className="text-center mb-6"><div className="bg-blue-600 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg shadow-blue-200"><Lock className="h-6 w-6 text-white" /></div><h2 className="text-2xl font-bold text-gray-800">Admin Login</h2></div>
                        <form onSubmit={(e) => { e.preventDefault(); if(!onLogin(pass)) setError('Sai mật khẩu'); }} className="space-y-4">
                            <input type="password" value={pass} onChange={(e) => setPass(e.target.value)} placeholder="Nhập mật khẩu..." className="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none" autoFocus />
                            {error && <p className="text-red-600 text-sm text-center bg-red-50 p-2 rounded">{error}</p>}
                            <button type="submit" className="w-full py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 font-bold shadow-lg shadow-blue-200">Đăng Nhập</button>
                            <button type="button" onClick={onCancel} className="w-full py-3 text-gray-500 text-sm">Quay lại</button>
                        </form>
                    </div>
                </div>
            );
        }

        function AdminDashboard({ students, tasks, submissions, onUpdateConfig }) {
            const [tab, setTab] = useState('overview');
            const [editStudents, setEditStudents] = useState(students.join('\n'));
            const [editTasks, setEditTasks] = useState(tasks.join('\n'));
            const [isSaving, setIsSaving] = useState(false);

            const handleSave = async () => {
                setIsSaving(true);
                try {
                    const s = editStudents.split('\n').map(x => x.trim()).filter(x => x);
                    const t = editTasks.split('\n').map(x => x.trim()).filter(x => x);
                    await onUpdateConfig(s, t);
                    alert('Đã lưu!');
                } catch { alert('Lỗi lưu!'); }
                setIsSaving(false);
            };

            const exportCSV = () => {
                const headers = ["Họ Tên", "Nhiệm Vụ", "Link", "Ngày Nộp"];
                const rows = submissions.map(s => [
                    `"${s.studentName}"`, `"${s.taskName}"`, `"${s.link}"`,
                    `"${s.submittedAt ? new Date(s.submittedAt).toLocaleString('vi-VN') : ''}"`
                ]);
                const csv = "data:text/csv;charset=utf-8,\uFEFF" + headers.join(",") + "\n" + rows.map(r => r.join(",")).join("\n");
                const link = document.createElement("a");
                link.href = encodeURI(csv);
                link.download = "Baocao.csv";
                document.body.appendChild(link); link.click(); document.body.removeChild(link);
            };

            return (
                <div className="flex flex-col h-full bg-gray-50 animate-in">
                    <div className="flex border-b bg-white px-4 pt-2">
                        <button onClick={() => setTab('overview')} className={`mr-6 py-3 text-sm font-medium border-b-2 ${tab === 'overview' ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-500'}`}>Bài Nộp</button>
                        <button onClick={() => setTab('config')} className={`py-3 text-sm font-medium border-b-2 ${tab === 'config' ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-500'}`}>Cấu Hình</button>
                    </div>
                    <div className="p-4 flex-1 overflow-auto">
                        {tab === 'overview' ? (
                            <div className="h-full flex flex-col">
                                <div className="flex justify-between items-center mb-4"><span className="font-bold text-gray-700">Tổng: {submissions.length} bài</span><button onClick={exportCSV} className="bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow hover:bg-green-700 flex items-center"><FileSpreadsheet className="h-4 w-4 mr-2"/> Xuất CSV</button></div>
                                <div className="bg-white shadow rounded-xl overflow-hidden flex-1 border border-gray-200">
                                    <div className="overflow-auto h-full">
                                        <table className="min-w-full divide-y divide-gray-200 relative">
                                            <thead className="bg-gray-100 sticky top-0"><tr><th className="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase">Tên</th><th className="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase">Bài</th><th className="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase">Link</th><th className="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase">Giờ</th></tr></thead>
                                            <tbody className="divide-y divide-gray-200 bg-white">
                                                {submissions.map((s, i) => (
                                                    <tr key={i} className="hover:bg-blue-50"><td className="px-6 py-3 text-sm font-medium">{s.studentName}</td><td className="px-6 py-3 text-sm text-gray-600">{s.taskName}</td><td className="px-6 py-3 text-sm"><a href={s.link} target="_blank" className="text-blue-600 hover:underline truncate max-w-[150px] block">{s.link}</a></td><td className="px-6 py-3 text-xs text-gray-500">{s.submittedAt ? new Date(s.submittedAt).toLocaleString('vi-VN') : ''}</td></tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        ) : (
                            <div className="grid md:grid-cols-2 gap-6 h-full pb-10">
                                <div className="bg-white p-4 rounded-xl border flex flex-col"><h4 className="font-bold mb-2">Danh sách Học viên</h4><textarea value={editStudents} onChange={e => setEditStudents(e.target.value)} className="flex-1 w-full border rounded p-2 text-sm font-mono" placeholder="Nhập tên mỗi dòng..."></textarea></div>
                                <div className="bg-white p-4 rounded-xl border flex flex-col"><h4 className="font-bold mb-2">Danh sách Bài tập</h4><textarea value={editTasks} onChange={e => setEditTasks(e.target.value)} className="flex-1 w-full border rounded p-2 text-sm font-mono" placeholder="Nhập bài mỗi dòng..."></textarea></div>
                                <div className="md:col-span-2"><button onClick={handleSave} disabled={isSaving} className="w-full bg-blue-600 text-white py-3 rounded-xl font-bold shadow hover:bg-blue-700">{isSaving ? 'Đang lưu...' : 'Lưu Cấu Hình'}</button></div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
